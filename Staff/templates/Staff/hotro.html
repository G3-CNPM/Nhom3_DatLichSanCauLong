{% extends "Staff/base.html" %}
{% load static %}

{% block main-content %}
<html>
 <head>
  <title>
   Hỗ trợ
  </title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
   body {
            font-family: Arial, sans-serif;
            background-color: lightgray;
            margin: 0;
            padding: 0;
            color: #000;
        }
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-image: linear-gradient(to right, rgb(160, 122, 122), rgb(28, 201, 161), #13a1b1);
            padding: 10px 20px;
        }
        .navbar .nav-links {
            display: flex;
            align-items: center;
        }
        .navbar img {
            background-size: 120px;
            background-repeat: no-repeat;
            width: 120px;
            height: 65px;
            border-radius: 10%;
        }
        .navbar .nav-links a {
            color: black;
            text-decoration: none;
            margin: 0 15px;
            font-size: 18px;
            font-weight: bold;
        }
        .navbar .login-button {
            background-color: orange;
            color: black;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: medium;
        }
        .content {
            padding: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th {
            background-color:white;
            color: black;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        td {
            background-color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
        }
        .add-request-button {
            background-color: #f4c542;
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            text-align: left;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .modal-content label {
            display: block;
            margin-bottom: 5px;
        }
        .modal-content input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .modal-content button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .modal-content button:hover {
            background-color: #45a049;
        }
        .complete-button, .delete-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        .complete-button:hover, .delete-button:hover {
            background-color: #45a049;
        }
        .delete-button {
            background-color: #f44336;
        }
        .delete-button:hover {
            background-color: #e53935;
        }
        .alert {
            display: none;
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            z-index: 1000;
        }
  </style>
 </head>
 <body>
  <div class="navbar">
    <img src="{%static 'Staff/Logo_Bad.png'%}" alt="Logo Feaver">
   <div class="nav-links">
    <a href="{%url 'base:checkin'%}"> Check-in  </a>
    </a>
    <a href="#">
        <a href="{%url 'base:kttrangthai'%}">Trạng thái </a>
    </a>
    <a class="active" href="#">
        <a href="{%url 'base:hotro'%}">Hỗ trợ </a>
    </a>
   </div>
   <button class="login-button">
    Đăng nhập
   </button>
  </div>
  <div class="content">
   <table>
    <tr>
     <th>
      Sân
     </th>
     <th>
      Ghi chú 
     </th>
     <th>
      Xác nhận thanh toán
     </th>
     <th>
      Xóa
     </th>
    </tr>
   </table>
   <button class="add-request-button" id="addRequestBtn">
    Thêm yêu cầu
   </button>
  </div>
  <div class="modal" id="addRequestModal">
   <div class="modal-content">
    <span class="close">
     ×
    </span>
    <h2>
     Thêm yêu cầu mới
    </h2>
    <form id="addRequestForm">
     <label for="san">
      Sân:
     </label>
     <input id="san" name="san" required="" type="text"/>
     <label for="ghichu">
      Ghi chú :
     </label>
     <input id="ghichu" name="ghichu" required="" type="text"/>
     <label for="sotien">
      Số tiền (VNĐ):
     </label>
     <input id="sotien" name="sotien" required="" type="number"/>
     <button type="submit">
      Thêm
     </button>
    </form>
   </div>
  </div>
  <div class="alert" id="alert">
   Xác nhận thành công!
  </div>
  <script>
   var modal = document.getElementById("addRequestModal");
        var btn = document.getElementById("addRequestBtn");
        var span = document.getElementsByClassName("close")[0];
        var alertBox = document.getElementById("alert");

        btn.onclick = function() {
            modal.style.display = "block";
        }

        span.onclick = function() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        document.getElementById("addRequestForm").onsubmit = function(event) {
            event.preventDefault();
            var san = document.getElementById("san").value;
            var ghichu = document.getElementById("ghichu").value;
            var sotien = document.getElementById("sotien").value;

            var formattedSotien = new Intl.NumberFormat('vi-VN').format(sotien);

            var table = document.querySelector("table");
            var newRow = table.insertRow();
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);
            var cell4 = newRow.insertCell(3);
            cell1.innerHTML = san;
            cell2.innerHTML = ghichu;
            cell3.innerHTML = formattedSotien + ' VNĐ <button class="complete-button" onclick="confirmPayment(this)">Xác nhận</button>';
            cell4.innerHTML = '<button class="delete-button" onclick="removeRow(this)">Xóa</button>';

            modal.style.display = "none";
        }

        function removeRow(button) {
            var row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }

        function confirmPayment(button) {
            var cell = button.parentNode;
            cell.innerHTML = cell.innerHTML.split(' ')[0] + ' VNĐ - Đã xác nhận';
            showAlert();
        }

        function showAlert() {
            alertBox.style.display = "block";
            setTimeout(function() {
                alertBox.style.display = "none";
            }, 2000);
        }
  </script>
 </body>
</html>
{% endblock main-content %}